# [FreePiano](http://freepiano.tiwb.com)

FreePiano 是一个虚拟 MIDI 键盘和 Windows 平台的钢琴。

你可以使用 FreePiano 用电脑键盘或 MIDI 键盘演奏钢琴，搭配你喜欢的任何 VST 乐器，或者通过 MIDI 输出，或者使用键盘上的任意按键生成任何 MIDI 信息。你还可以录制你的歌曲并导出为 MP4 视频，与朋友分享。

![ScreenShot](res/screenshot.jpg)

## FreePiano 的功能：

* 完全免费，无需购买即可使用所有功能。
* 使用 VSTi，无需安装虚拟 MIDI 设备。
* 支持多种音频输出，包括 DirectSound、WASAPI 和 ASIO。
* 您可以定义键盘上任意键位和显示功能。
* 可在演奏过程中随时切换多套键盘布局。
* 直接将歌曲导出为 mp4 格式。

## README 与附加文档

本仓库当前包含 FreePiano 1.8 的源码。项目的官方最新稳定版本为 2.2.2.1，但该版本的完整源码/二进制未包含在本仓库中。

为了升级，请参考中文版文档：

- 升级指南：![`docs/UPGRADE-1.8-to-2.2.2.1.md`](docs/UPGRADE-1.8-to-2.2.2.1.md)
- 构建指南：![`BUILD.md`](BUILD.md)

## 更新日志
**2013-06-24 FreePiano 1.8**
* 支持原始 MIDI 消息，使用“MIDI”命令最多可以发送 3 个十六进制数字作为 MIDI 消息。所有其他脚本命令不再是 MIDI 信号。
* 所有脚本命令现在都可以与所有值运算符正确配合，包括“Sync”和“Press”修饰符。
* 支持最多 16 个输入通道，然后映射到 16 个 MIDI 输出通道。
* 在输入通道上添加“跟随调号”选项，可以控制输入通道不跟随当前调号。
* 在输出通道上添加“Bank”选项，相当于 MIDI 控制器 0。
* 优化了调号弹出设置对话框和设置对话框。
* 优化了主屏幕刷新，FreePiano 现在使用更少的 GPU。
* 预设菜单现在支持群组，并添加了许多常用的预设脚本。
* 在 Windows XP 上可以正确切换语言。
* 本地化脚本支持。
* 支持键盘颜色，现在可以将音符名称显示为“C D E F G A B”。
* 新的“WAV”文件导出器。
* 新的更新通知。
* 修复了复制组键映射时音符会降低八度的错误。

**2013-05-24 FreePiano 1.7**
* 播放设置页面，可以更改 MIDI 输出通道和声音。
* 新增 Set1 和 Set10 修改器，可以通过掩码 1 或 10 更改值。
* 添加了移调命令，可以对每个通道上的音符进行移调，并添加了两个可在左手或右手升调的预设。在弹出菜单中强制使用选定的键绑定脚本，使复制键脚本无需修改键名即可轻松完成。
* 优化脚本显示，更容易找到哪个参数是通道。
* 将“增加、减少”组更改为“添加、插入、删除”组。
* 主窗口的透明度可在 GUI 设置中更改。
* 在音频设置页面中添加播放速度。
* 修复了键盘映射编辑器会吃掉最后一个字符的错误。
* 修复了 FreePiano 将 C5 用作中央 C 的错误。
* 修复了起始组不为 0 时歌曲录制错误组的错误。
* 修复了导出 MP4 时音量未使用的错误。

**2013-02-06 FreePiano 1.6**
* 新的弹出式键盘修改菜单，可快速编辑脚本。
* 添加了固定 DOH 显示模式。
* 添加了键盘动画，可在 GUI 设置中更改。
* 在控制器命令中添加了“同步”修饰符，可与其他修饰符结合使用。例如，“SyncPress”将在播放下一个音符后执行“按下”控制。
* 修复了键盘映射脚本编辑器仍然有长度限制的错误。

**2013-01-28 FreePiano 1.5.2**
* 修复了部分配置无法保存的错误。
* 键盘映射脚本的长度现在没有限制。
* 在控制器命令中添加了“按下”修饰键，可以临时更改控制器值，并在 20 毫秒后将其改回。

**2013-01-21 FreePiano 1.5.1**
* Freepiano 1.5 无法在 Windows XP 上运行，此路径已修复此问题。

**2013-01-14 FreePiano 1.5**

* 现在支持多个 MIDI 输入设备和重新映射 MIDI 输入通道。
* MIDI 输出现在作为乐器，可以在乐器菜单中选择。
* 更改键盘钩子方法，使其更易于杀毒软件检测。
* MIDI 输入力度不再通过按键力度选项调整。
* 修复了预设控制器菜单无法清除先前按键映射的错误。
* 修复了部分 MIDI 键盘无法处理 Noteoff 的 bug。
* 修复了 Keyup 绑定无效的 bug。

**2012-10-16 FreePiano 1.4.1**

* 使用 MIDI 键盘时，主屏幕上还可以使用 KEY、VELOCITY 和 OCTSHIFT 键。
* 增加了显示原始调或转录调的选项。

**2012-10-08 FreePiano 1.4**

* 修复了歌曲信息页面的语言错误。
* 修复了配置文件中无法正确加载负数的 bug。
* 最大键组数量增加到 255 个。
* 当前键组现在显示在主界面上。
* 主界面本地化。
* 演奏过程中更改“DelayKeyup”命令将影响当前演奏的音符。现在更像延音踏板。
* 允许将多个命令映射到单个键。

**2012-04-25 FreePiano 1.3**

* 修复了无法保存音量和输出缓冲区大小的错误。
* 修复了无法读取 MIDI 控制器信息的错误。
* 增加了英语语言支持。
* 增加了中文键标支持。
* 主音量最高可调至 200%。
* FlashPiano 布局的键盘映射已更改为显示键名。
* 增加了 MP4 视频文件导出功能。

**2011-06-26 FreePiano 1.2**

* 修复了 MIDI 事件无法记录的错误。
* 修复了将某些控件映射到某些键可能无法正常工作的错误。
* 修复了加载某些 VST 插件时程序崩溃的问题。
* 新增了 MIDI 控制器信息扩展，Add、Sub、Flip 可用于 MIDI 控制器信息。
* 新增了 MIDI 音色变化信息扩展，与控制器信息相同。
* 音色、控制器值可以保存到组设置中。

**2011-05-27 FreePiano 1.1**

* 修复播放时可能出现的噪音。
* 修复 VST 插件路径保存错误。
* 修复最小化时 CPU 占用高的问题。
* 修复右键菜单中设置通道的问题。
* 优化键盘映射界面。
* 添加播放速度控制。
* 添加禁用 Windows 键功能。
* 添加设置组，可随时更改设置组。
* 添加键盘映射的复制粘贴支持。
* 添加禁用调整窗口大小选项。
* 添加配置文件和歌曲文件的拖放支持。

**2011-05-19 FreePiano 1.0**

* 全新用户界面。
* 支持录音和播放，支持读取 LYT 文件格式。
* 添加部分状态显示。
* 在主界面添加录音和播放按钮。